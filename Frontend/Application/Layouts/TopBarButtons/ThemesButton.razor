@namespace Frontend.Application.Layouts
@inherits Microsoft.AspNetCore.Components.ComponentBase

<RadzenButton Variant="Variant.Text" ContextMenu=@(args => ShowContextMenu(args)) class="topbar-icon" title="@AppText["0015"]" Click="@(() => ToggleTheme())">
	<LordIcon Icon="/topbar/bulb.json" Anim="none" Trigger="auto" State="morph-bulb-OFF" Size="24px" Target=".rz-button" Title="@AppText["0015"]" Id="theme-icon" />
</RadzenButton>

@code {

	private void ToggleTheme() {
		_ = JSRuntime.InvokeVoidAsync("toggleTheme");
	}

	private void ShowContextMenu(MouseEventArgs args) => ContextMenuService.Open(args, ds =>
	@<RadzenMenu Click="ApplyTheme">
		<RadzenMenuItem Text=@AppText["0016"] Value="0" Icon="brightness_4"></RadzenMenuItem>
		<RadzenMenuItem Text=@AppText["0018"] Value="1" Icon="brightness_high"></RadzenMenuItem>
		<RadzenMenuItem Text=@AppText["0020"] Value="2" Icon="mode_night"></RadzenMenuItem>
	</RadzenMenu>);

	private void ApplyTheme(MenuItemEventArgs args) {
		_ = args.Value switch {
			1 => JSRuntime.InvokeVoidAsync("applyTheme", "light"),
			2 => JSRuntime.InvokeVoidAsync("applyTheme", "dark"),
			_ => JSRuntime.InvokeVoidAsync("applyTheme", "auto")
		}; ContextMenuService.Close();
	}

}