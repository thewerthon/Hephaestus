@namespace Hephaestus.Frontend.Layouts.LayoutParts
@inherits Microsoft.AspNetCore.Components.ComponentBase

<!-- Logo -->
<RadzenStack AlignItems="Radzen.AlignItems.Center" Gap="0px" Style="padding:var(--rz-panel-menu-item-padding);border-bottom:var(--rz-panel-menu-item-border);cursor:pointer" class="app-sidebar-logo rz-pt-4 rz-pb-2" @onclick="@OnToggle">
	<RadzenRow AlignItems="AlignItems.Center" JustifyContent="JustifyContent.Center" Gap="10px" Style="flex-wrap:nowrap">
		<RadzenIcon Icon="arrow_back_ios" Style="display:none" class="back-icon" title="@AppText["0006"]" />
		<RadzenImage style="width:fit-content;height:38px;" class="logo logo-dark" title="@AppInfo["Fullname"]"></RadzenImage>
	</RadzenRow>
</RadzenStack>

<!-- Panel Menu -->
<RadzenPanelMenu Style="height:100%" class="sidebar-scrollbox scrollbar-hidden">

	<!-- Início -->
	<RadzenText Text="@AppMenu["0000"]" TextStyle="TextStyle.Overline" TagName="TagName.P" class="rz-my-0 rz-ml-4 rz-pb-2 rz-pt-4" style="color:var(--rz-sidebar-label-color)" />
	<RadzenPanelMenuItem Text="@AppMenu["0200"]" Path="@AppPath["0200"]" Image="@AppIcon["0200"]" Click="@OnNavigate" />

	<!-- Application -->
	<RadzenPanelMenuItem Text="@AppMenu["1000"]" Image="@AppIcon["1000"]" Click="@(() => eApp = OnExpand(eApp))" @bind-Expanded="@eApp">
		<RadzenPanelMenuItem Text="Test 1" Path="/dev/test1" Icon="science" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="Test 2" Path="/dev/test2" Icon="science" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="Test 3" Path="/dev/test3" Icon="science" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="Test 4" Path="/dev/test4" Icon="science" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="Test 5" Path="/dev/test5" Icon="science" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["1300"]" Path="@AppPath["1300"]" Icon="@AppIcon["1300"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["1200"]" Path="@AppPath["1200"]" Icon="@AppIcon["1200"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["1100"]" Path="@AppPath["1100"]" Icon="@AppIcon["1100"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Engineering -->
	<RadzenText Text="@AppMenu["2000"]" TextStyle="TextStyle.Overline" TagName="TagName.P" class="rz-my-0 rz-ml-4 rz-pb-2 rz-pt-4" style="color:var(--rz-sidebar-label-color)" />
	<RadzenPanelMenuItem Text="@AppMenu["2100"]" Image="@AppIcon["2100"]" Click="@(() => eEng = OnExpand(eEng))" @bind-Expanded="@eEng">
		<RadzenPanelMenuItem Text="@AppMenu["2110"]" Path="@AppPath["2110"]" Icon="@AppIcon["2110"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2120"]" Path="@AppPath["2120"]" Icon="@AppIcon["2120"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2130"]" Path="@AppPath["2130"]" Icon="@AppIcon["2130"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2140"]" Path="@AppPath["2140"]" Icon="@AppIcon["2140"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Warehouse -->
	<RadzenPanelMenuItem Text="@AppMenu["2200"]" Image="@AppIcon["2200"]" Click="@(() => eWar = OnExpand(eWar))" @bind-Expanded="@eWar">
		<RadzenPanelMenuItem Text="@AppMenu["2210"]" Path="@AppPath["2210"]" Icon="@AppIcon["2210"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2220"]" Path="@AppPath["2220"]" Icon="@AppIcon["2220"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2230"]" Path="@AppPath["2230"]" Icon="@AppIcon["2230"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2240"]" Path="@AppPath["2240"]" Icon="@AppIcon["2240"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2250"]" Path="@AppPath["2250"]" Icon="@AppIcon["2250"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2260"]" Path="@AppPath["2260"]" Icon="@AppIcon["2260"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Planning -->
	<RadzenPanelMenuItem Text="@AppMenu["2300"]" Image="@AppIcon["2300"]" Click="@(() => ePln = OnExpand(ePln))" @bind-Expanded="@ePln">
		<RadzenPanelMenuItem Text="@AppMenu["2310"]" Path="@AppPath["2310"]" Icon="@AppIcon["2310"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2320"]" Path="@AppPath["2320"]" Icon="@AppIcon["2320"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2330"]" Path="@AppPath["2330"]" Icon="@AppIcon["2330"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2340"]" Path="@AppPath["2340"]" Icon="@AppIcon["2340"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2350"]" Path="@AppPath["2350"]" Icon="@AppIcon["2350"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Production -->
	<RadzenPanelMenuItem Text="@AppMenu["2400"]" Image="@AppIcon["2400"]" Click="@(() => ePrd = OnExpand(ePrd))" @bind-Expanded="@ePrd">
		<RadzenPanelMenuItem Text="@AppMenu["2410"]" Path="@AppPath["2410"]" Icon="@AppIcon["2410"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2420"]" Path="@AppPath["2420"]" Icon="@AppIcon["2420"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2430"]" Path="@AppPath["2430"]" Icon="@AppIcon["2430"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2440"]" Path="@AppPath["2440"]" Icon="@AppIcon["2440"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Quality -->
	<RadzenPanelMenuItem Text="@AppMenu["2500"]" Image="@AppIcon["2500"]" Click="@(() => eQua= OnExpand(eQua))" @bind-Expanded="@eQua">
		<RadzenPanelMenuItem Text="@AppMenu["2510"]" Path="@AppPath["2510"]" Icon="@AppIcon["2510"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2520"]" Path="@AppPath["2520"]" Icon="@AppIcon["2520"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2530"]" Path="@AppPath["2530"]" Icon="@AppIcon["2530"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2540"]" Path="@AppPath["2540"]" Icon="@AppIcon["2540"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2550"]" Path="@AppPath["2550"]" Icon="@AppIcon["2550"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2560"]" Path="@AppPath["2560"]" Icon="@AppIcon["2560"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Fiscal -->
	<RadzenPanelMenuItem Text="@AppMenu["2600"]" Image="@AppIcon["2600"]" Click="@(() => eFis= OnExpand(eFis))" @bind-Expanded="@eFis">
		<RadzenPanelMenuItem Text="@AppMenu["2610"]" Path="@AppPath["2610"]" Icon="@AppIcon["2610"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2620"]" Path="@AppPath["2620"]" Icon="@AppIcon["2620"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2630"]" Path="@AppPath["2630"]" Icon="@AppIcon["2630"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2640"]" Path="@AppPath["2640"]" Icon="@AppIcon["2640"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2650"]" Path="@AppPath["2650"]" Icon="@AppIcon["2650"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Logistics -->
	<RadzenPanelMenuItem Text="@AppMenu["2700"]" Image="@AppIcon["2700"]" Click="@(() => eLog= OnExpand(eLog))" @bind-Expanded="@eLog">
		<RadzenPanelMenuItem Text="@AppMenu["2710"]" Path="@AppPath["2710"]" Icon="@AppIcon["2710"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["2720"]" Path="@AppPath["2720"]" Icon="@AppIcon["2720"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Safety -->
	<RadzenText Text="@AppMenu["3000"]" TextStyle="TextStyle.Overline" TagName="TagName.P" class="rz-my-0 rz-ml-4 rz-pb-2 rz-pt-4" style="color:var(--rz-sidebar-label-color)" />
	<RadzenPanelMenuItem Text="@AppMenu["3100"]" Image="@AppIcon["3100"]" Click="@(() => eSaf = OnExpand(eSaf))" @bind-Expanded="@eSaf">
		<RadzenPanelMenuItem Text="@AppMenu["3110"]" Path="@AppPath["3110"]" Icon="@AppIcon["3110"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["3120"]" Path="@AppPath["3120"]" Icon="@AppIcon["3120"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

	<!-- Maintenance -->
	<RadzenPanelMenuItem Text="@AppMenu["3200"]" Image="@AppIcon["3200"]" Click="@(() => eMan = OnExpand(eMan))" @bind-Expanded="@eMan">
		<RadzenPanelMenuItem Text="@AppMenu["3210"]" Path="@AppPath["3210"]" Icon="@AppIcon["3210"]" Click="@OnNavigate" />
		<RadzenPanelMenuItem Text="@AppMenu["3220"]" Path="@AppPath["3220"]" Icon="@AppIcon["3220"]" Click="@OnNavigate" />
	</RadzenPanelMenuItem>

</RadzenPanelMenu>

<!-- Footer -->
<Footer InSidebar="true" />

@code {

	[Parameter]
	public EventCallback<EventArgs> Toggle { get; set; }
	private bool eApp, eEng, eWar, ePln, ePrd, eQua, eFis, eLog, eSaf, eMan;

	protected override void OnInitialized() {
		NavigationManager.LocationChanged += OnLocationChanged;
	}

	public void Dispose() {
		NavigationManager.LocationChanged -= OnLocationChanged;
	}

	private void OnLocationChanged(object? sender, LocationChangedEventArgs args) {

		base.InvokeAsync(async () => {

			await Task.Delay(1);
			var uri = NavigationManager.Uri;

			OnExpand(false);
			eApp = uri.Contains(AppPath["1400"]);
			eEng = uri.Contains(AppPath["2100"]);
			eWar = uri.Contains(AppPath["2200"]);
			ePln = uri.Contains(AppPath["2300"]);
			ePrd = uri.Contains(AppPath["2400"]);
			eQua = uri.Contains(AppPath["2500"]);
			eFis = uri.Contains(AppPath["2600"]);
			eLog = uri.Contains(AppPath["2700"]);
			eSaf = uri.Contains(AppPath["3100"]);
			eMan = uri.Contains(AppPath["3200"]);
			StateHasChanged();

			_ = JSRuntime.InvokeVoidAsync("fireIconAnim", "icon-error-anim");

		});

	}

	public async Task OnToggle(EventArgs args) {
		await Toggle.InvokeAsync(args);
	}

	public async Task OnNavigate(EventArgs args) {

		var width = await JSRuntime.InvokeAsync<int>("getWindowWidth");

		if (width <= 768) {
			await Toggle.InvokeAsync(args);
		}

	}

	private bool OnExpand(bool eGpr) {
		eApp = eEng = eWar = ePln = ePrd = eQua = eFis = eLog = eSaf = eMan = false;
		return eGpr;
	}

}